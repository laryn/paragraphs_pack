<?php

/**
 * @file
 * Paragraphs pack content list module's tests.
 */

/**
 * Test case for Paragraphs pack content list.
 */
class ParagraphsPackNodeListTestCase extends DrupalWebTestCase {

  /**
   * Give display information to the SimpleTest system.
   *
   * getInfo() returns a keyed array of information for SimpleTest to show.
   *
   * It's a good idea to organize your tests consistently using the 'group'
   * key.
   */
  public static function getInfo() {
    return array(
      'name' => 'Paragraphs pack content list tests',
      'description' => 'Tests:  Paragraphs pack content list installation.',
      'group' => 'Paragraphs pack',
    );
  }

  /**
   * Set up the test environment.
   */
  public function setUp() {
    // We call parent::setUp() with the list of modules we want to enable.
    parent::setUp('paragraphs_pack_node_list');
  }

  /**
   * Paragraph Content bundle should be created.
   */
  public function testParagraphsPackListBundle() {
    $content_bundle_loaded = (paragraphs_bundle_load(PP_BUNDLE_NODE_LIST) != FALSE);

    $this->assertTrue($content_bundle_loaded, t('Paragraph "@paragraph_bundle" bundle was successfully created.', array(
      '@paragraph_bundle' => PP_BUNDLE_NODE_LIST,
    )));
  }

  /**
   * Test items field and instance existance.
   */
  public function testParagraphsPackListFieldItemsExistence() {
    $field = field_info_field(PP_FIELD_ITEMS);
    $this->assertTrue(!empty($field), t('Field "@paragraph_field" exists.', array(
      '@paragraph_field' => PP_FIELD_ITEMS,
    )));

    $instance = field_info_instance(PP_PARAGRAPH_TYPE, PP_FIELD_ITEMS, PP_BUNDLE_NODE_LIST);
    $this->assertTrue(!empty($instance), t('Paragraph "@paragraph_bundle" bundle contains "@paragraph_field" field instance.', array(
      '@paragraph_bundle' => PP_BUNDLE_NODE_LIST,
      '@paragraph_field' => PP_FIELD_ITEMS,
    )));
  }

  /**
   * Test view mode field and instance existance.
   */
  public function testParagraphsPackListFieldViewModeExistence() {
    $field = field_info_field(PP_FIELD_VIEW_MODE);
    $this->assertTrue(!empty($field), t('Field "@paragraph_field" exists.', array(
      '@paragraph_field' => PP_FIELD_VIEW_MODE,
    )));

    $instance = field_info_instance(PP_PARAGRAPH_TYPE, PP_FIELD_VIEW_MODE, PP_BUNDLE_NODE_LIST);
    $this->assertTrue(!empty($instance), t('Paragraph "@paragraph_bundle" bundle contains "@paragraph_field" field instance.', array(
      '@paragraph_bundle' => PP_BUNDLE_NODE_LIST,
      '@paragraph_field' => PP_FIELD_VIEW_MODE,
    )));
  }

}
